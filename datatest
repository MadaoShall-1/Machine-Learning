"""
Extract Small Sample for Debugging
===================================
Run this on YOUR machine to create a tiny sample I can use to fix the code.

This will create a JSON file with just 2-3 samples from each language pair.
"""

import pandas as pd
import json
from pathlib import Path

def extract_mini_sample(csv_path, n_samples=3):
    """Extract just n_samples rows from a CSV"""
    df = pd.read_csv(csv_path, nrows=n_samples)
    
    # Convert to dict
    sample_data = []
    for _, row in df.iterrows():
        row_dict = {}
        for col in df.columns:
            val = row[col]
            # Convert to string if too complex
            if isinstance(val, (list, dict)):
                row_dict[col] = str(val)[:500]  # Truncate long values
            else:
                row_dict[col] = val
        sample_data.append(row_dict)
    
    return sample_data


def main():
    """Extract samples from all language pairs"""
    
    # Adjust these paths to where your CSV files are
    data_files = [
        "data\Spanish_eng.csv",
        "data\Arabic_eng.csv",
        "data\Hindi_eng.csv",
        "data\Chinese_eng.csv"
    ]
    
    all_samples = {}
    
    for filename in data_files:
        filepath = Path(filename)
        if filepath.exists():
            print(f"Processing {filename}...")
            samples = extract_mini_sample(filepath, n_samples=2)
            all_samples[filename] = samples
            print(f"  ‚úÖ Extracted {len(samples)} samples")
        else:
            print(f"  ‚ö†Ô∏è  File not found: {filename}")
    
    # Save to JSON
    output_file = "mini_sample_for_claude.json"
    with open(output_file, 'w', encoding='utf-8') as f:
        json.dump(all_samples, f, indent=2, ensure_ascii=False)
    
    print(f"\n‚úÖ Created: {output_file}")
    print(f"   File size: {Path(output_file).stat().st_size / 1024:.1f} KB")
    print(f"\nüëâ Now you can share this tiny JSON file with me!")


if __name__ == "__main__":
    main()